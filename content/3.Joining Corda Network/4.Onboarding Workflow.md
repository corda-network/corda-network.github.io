# Onboarding Workflow

Here's a summary of steps to join Corda Network. Before you proceed with the steps in this page, make sure that you have read and understood the following documentations:

1. [Pre-requisite to join](https://corda.network/joining-corda-network/pre-requisites)
2. [Corda Network Rulebook](https://corda.network/corda-network-rulebook/introduction) 
3. [Corda Network SLA Handbook](https://corda.network/trust-centre/sla-&-maintenance-handbook)

## Step 1: Introductory Call and Terms of Use Agreement

If you are interested to join Corda Network, please send an email to info@corda.network with answers to these questions:

1. Are you building / running a Corda application, or looking to use a Corda application?
2. What is the use case and name (if already available) of your Corda application?
3. Are you using Corda Open Source or Enterprise?
4. Have you been in touch with any other R3 personnel?

An R3 representative will schedule a call with you to go through the onboarding process. We will also advise you on the network choice and contracting model.

## Step 2: Pre-approval of CSR information

Once you have signed the Corda Network Terms of Use, you are eligible to join the Corda Network! First you need to register your **identity** on the network (just like opening a bank account). As Corda is a permissioned blockchain network, your request to join the network will be reviewed and approved before your identity is registered on Corda Network.

Please note that this step is a *MANDATORY STEP*, please ensure that you do this before sending any registration requests to the Corda Network Identity Manager. This step ensures when you submit your Certificate Signing Reqeuest ("CSR") in Step 6, your identity name is pre-approved already and the lead time for your identity to appear on the network map will be shortened.

i. You will raise a [Task](https://r3-cev.atlassian.net/servicedesk/customer/portal/2/group/2/create/79) ticket on the Corda Network Support Portal. *Note: Your access to the Corda Network Support Portal will be granted after signing the Corda Network Terms of Use, and your email address needs to be filled out on the Contact Details table on the Terms of Use. If you have any questions, please contact your R3 account manager.*

ii. Title the ticket "Pre-approval of X.500 name", copy the following 4 questions and answer them on the free text field on the ticket. Please note that you need to fill out a separate ticket for each identity that you are adding.

1. What is the X.500 name of your node?

X.500 name is your node's unique identifier on Corda Network. It consists of the following 6 fields. Check out [Allowable Identity Names](https://corda.network/corda-network-rulebook/allowable-identity-names-on-corda-network) section of the Corda Network Rulebook for detailed guidance of naming your X.500.

| Required x500 fields        | Value |
| --------------------------- | ----: |
| **Organisation (O)**        |     - |
| **City (L)**                |     - |
| **Country (C)**             |     - |
| **Organisation Unit (OU)**  |     - |
| State (ST)                  |     - |
| Common Name (CN)            |     - |

- "O" Organisation should be the same Legal Entity as what you have filled out in your Terms of Use (Step 1), unless you are onboarding for your sponsee. This is also the owner of the assets being used on Corda Network. For guidance on which legal entity name to pick for your node, see the [Allowable Identity Names](https://corda.network/corda-network-rulebook/allowable-identity-names-on-corda-network) 
.
- "L" and "C" City and Country should be the same as that of your entity's official registered address.
- "OU" Organisation Unit is a discretionary field for you to put in a value of your choice
- Fields in non-bold are optional, except for State (S), which is required only for legal entities registered in a country with federal states system (e.g. USA, Australia, Canada, etc).
- The X.500 name is checked for uniqueness. If a CSR is submitted (or a certificate exists) with an X.500 name already in Corda Network, it will be automatically rejected.

2. What is the official registered address of the legal entity?
3. Are you submitting the node on behalf of your entity, or your sponsee's entity?
4. Is the legal entity is on a sanctions list observed by Corda Network?

- You can refer to Section 1.2 of the [Admission Criteria](https://corda.network/corda-network-rulebook/admissions-criteria/) for the list of sanctions lists observed by Corda Network.

iii. The Corda Network operator (R3 currently) will perform due diligence checks on the proposed identity name you submitted. This includes:

1. **Legal entity check** - we will check if the legal entity (Organisation field, or "O" field) of the registering node is an officially registered company. *Note: We do not accept individuals joining the Corda Network at the moment.*
2. **Sanction check** - we will check if the legal entity is on a sanction list observed by the Corda Network operator
3. **Naming convention check** - we will check if your proposed x500 name follows the all naming convention rules set out in the [Corda Network Rulebook](https://corda.network/corda-network-rulebook/introduction).

### Other things to note...

- If you are setting up a notary, there are additional considerations you need to keep in mind, please check [docs.corda.net/](https://docs.corda.net/docs/corda-enterprise/4.8/corda-network/setup-segregated-notary.html#setting-up-a-notary-in-a-segregated-network) for instructions to set up a notary.

iv. If your request passed the checks, our team will pre-approve your identity name on the Support ticket. You should keep a record of the ticket number of this pre-approval ticket, as you have to reference it when submitting a request to approve the CSR (Step 6).

## Step 3: Trust Root

**Step 3 - 5 are technical instructions for you to set up your node before registering it on Corda Network.**

Please put the trust root file for the correct environment in your certificates folder.

[Pre-production Network](https://github.com/corda-network/corda-network.github.io/blob/master/assets/trustroots/preproduction/network-root-truststore.jks)

[Production Network](https://github.com/corda-network/corda-network.github.io/blob/master/assets/trustroots/production/network-root-truststore.jks)

## Step 4: Deploy the node

Follow these instructions to [deploy the node](https://docs.corda.net/deploying-a-node.html). Where applicable, with help from a Corda representative.

## Step 5: Configure the node

Follow these instructions to [configure your node](https://docs.corda.net/corda-configuration-file.html). A node.conf file must be included in the root directory of every Corda node.

Use default passwords on the node configuration file to unlock the Trust Store file and Keystore file containing the Corda Network root certificate. This is a non-secret value required for your initial registration. 
trustStorePassword: trustpass

The email address needs to be filled out in the node.conf file. It should be an actively monitored mailbox. We will use this email address for all communications with the node, including those involved in identity verification. We recommend this is an ‘admin@’ or ‘info@’ generic email associated with the legal entity, to avoid key man risk.

**Step 5.1: Specifying URLs For Initial Registration**

The below networkmapurls are for the Corda Network mainnet, so if you start up your node and connect with this url, you will join the mainnet. 

N.B.: If you are joining a **Segregated Network**, you need to request it according to the instructions on the [Network Choice](https://corda.network/joining-corda-network/network-choice) section. To deploy your Segregated Network you will need to use your *unique* and *private* networkMapURL (for pre-production and/or production network). If you join the mainnet by accident, this is a problem that can easily be corrected, but your node's identity will appear on the network map for a period of time.

### Pre-Production Network

```
networkServices {
    doormanURL="https://doorman.uat.corda.network/3FCF6CEB-20BD-4B4F-9C72-1EFE7689D85B"
    networkMapURL="https://uat-sub1-netmap-01.uat.corda.network/SUB1CEP8-32UX-6ZXK-9C82-1FLR6268D75Z"
}
devMode = false
tlsCertCrlDistPoint : "http://crl.uat.corda.network/nodetls.crl"
tlsCertCrlIssuer : "CN=Corda TLS CRL Authority,OU=Corda UAT,O=R3 HoldCo LLC,L=New York,C=US"
```

### Production Network

The settings below must be added to the node.conf at the end of the file:

```
networkServices {
doormanURL = "https://doorman.corda.network/ED5D077E-F970-428B-8091-F7FCBDA06F8C"
networkMapURL = "https://prod-sub0-netmap-01.corda.network/SUB0CHKQ-8GCO-HS3S-KLZC-BINKKAGIMDRS"
}
tlsCertCrlDistPoint : "http://crl.corda.network/nodetls.crl"
tlsCertCrlIssuer : "CN=Corda TLS CRL Authority,OU=Corda Network,O=R3 HoldCo LLC,L=New York,C=US"
```

## Step 6: Run the initial registration

Step 6.1: Once the node.conf file is configured, the following should be typed to the command line:

**PLEASE ENSURE THAT THE X.500 NAME IN THE NODE.CONF FILE HAS BEEN PRE-APPROVED IN STEP 2. CSRs SUBMITTED WITHOUT PRE-APPROVAL WILL BE REJECTED WITHOUT NOTICE.**

```
java -jar corda.jar --initial-registration
```

This will send a Certificate Signing Request (with the relevant name and email) to the Identity Service.

A message similar to the below will be printed to the console:

```
Legal Name: O=ABC LIMITED, L=New York, C=US
Email: john.smith@abc.com

Public Key: EC Public Key
            X: d14bc17e650f2a317cbcb95e554f1e26808ca80f67ab804bbc911ec16673abbd
            Y: 1978b02a8e693ecd534ceef835091c376cfc4e506decc69b91a872fc13ad1aeb

-----BEGIN CERTIFICATE REQUEST-----
MIIBLTCBywIBADBMMQswCQYDVQQGEwJVUzERMA8GA1UEBwwITmV3IFlvcmsxFjAU
BgNVBAoMDVIzIEhvbGRDbyBMTEMxEjAQBgNVBAsMCUM4MTUyOTE2NzBZMBMGByqG
SM49AgEGCCqGSM49AwEHA0IABNFLwX5lDyoxfLy5XlVPHiaAjKgPZ6uAS7yRHsFm
c6u9GXiwKo5pPs1TTO74NQkcN2z8TlBt7Mabkahy/BOtGuugHTAbBgkqhkiG9w0B
CQExDgwMYWRtaW5AcjMuY29tMBQGCCqGSM49BAMCBggqhkjOPQMBBwNHADBEAiBA
KLF4NLrleNZPKMoxBrr/80fE3kVbFnYtkB2h0JhX1gIgPcV0X0xZQug+njKCyKgf
DkNUdQJPqhkBBEpgVqyZmE8=
-----END CERTIFICATE REQUEST-----
Submitting certificate signing request to Corda certificate signing server.
Successfully submitted request to Corda certificate signing server, request ID: 6CBB63558B4B2D9C94F8C14AB713432F60AF692EB30F2E12E628B089C517F3CF.
Start polling server for certificate signing approval.
```

Important: the Request ID given in the above should be noted and kept safe for future reference, including the Support ticket to request CSR approval in Step 6.2.

Step 6.2: Once the above step is completed, you should raise a [Task](https://r3-cev.atlassian.net/servicedesk/customer/portal/2/group/2/create/79) ticket on the Corda Network Support Portal, including the CSR Request ID a link to the ticket of your pre-approval request. You should raise one ticket per CSR. 

A **sample message** to include in the ticket is as follows:

*Hi Corda Network team,*

*Please approve the CSR submitted for Production / Pre-production (choose one) environment.*

- *X.500 Name:*
- *Request ID:*
- *Link to pre-approval ticket:*                  

A member of the team will review the ticket and approve your CSR accordingly.

## Step 7: Confirmation

**Step 7.1: Certificate Released and Node Restart**

Once approved, a signed node CA certificate will be released to your node. A node in polling mode will automatically download and install the certificate in its local trust store. It will also automatically generate additional identity and TLS certificates from the node CA certificate, which are required for subsequent operation of the node.

At this point, the node will terminate and will need to be restarted. Type “java -jar " into the command line. Once restarted, the node will then proceed to download the network map and discover other nodes within Corda Network. By the end of this process, you will become a participant in Corda Network.

You should also ensure that you install and configure your Corda applications ("CorDapps"). Instructions to install CorDapps can be found on https://docs.corda.net. If you are a CorDapp user, specifics on application usage or installation should be available from your CorDapp provider.

Business Network Operators should co-ordinate any post-install tests that may involve a small number of low value transactions on the business network to assure themselves of the correct setup of their node. Node operators should co-ordinate with their Business Network Operator in this regard. All node-initiated activity on the network from the point of connection is the responsibility of the node operator.

**Step 7.2: Ongoing Maintenance and technical announcements**

We currently communicate system maintenance schedule, disruptions and other important operational announcements related to the Corda Network services on our [Statuspage](https://corda-network.statuspage.io/#). Please ensure all individuals and/or groups responosible for technical operation of your network / node have subscribed to these updates so that they will be automatically sent to the relevant email addresses. You may request additional access to our [Statuspage](https://corda-network.statuspage.io/#) by raising a [Task](https://r3-cev.atlassian.net/servicedesk/customer/portal/2/group/2/create/79) ticket on the Corda Network Support Portal.

Please also ensure that the relevant lists are being subscribed to - each subscriber can choose which service(s) (notary, network map and identity operator) and enviornement(s) (Pre-production and Production) to subscribe to. **We strongly recommend that at least one individual in your organisation should subscribe to all services in your operating environment. You should also ensure you update your subscription list when you onboard to a new environment - such as ensuring you subscribe to all Production updates of as you onboarded to the Production environment).**

## Participation fee

Please contact info@corda.network or your R3 account manager for more information on available pricing options.
